{
  "id": "mod_pack",

  "meta": {
    "name": "Pitalica",
    "showCorrectResponse": "() => { this.children.mod_response.setData({ label: \"Točno\", visible: true, cssClass: \"correct\" }); }",
    "showWrongResponse": "() => { this.children.mod_response.setData({ label: \"Netočno\", visible: true, cssClass: \"wrong\" }) }",
    "setCurrentQuestion": "() => { var q = this.data.questions[this.data.current]; this.children.mod_question.setData({ question: q[0], answers: q[1], correct: q[2] })}",
    "nextQuestionAfterTimeout": "() => { setTimeout((function() { this.meta.hideResponse(); this.data.current = this.data.current === this.data.questions.length - 1 ? 0 : this.data.current + 1; this.meta.setCurrentQuestion() }).bind(this), 500); }",
    "hideResponse": "() => { this.children.mod_response.setData({ visible: false }); }"
  },

  "data": {
    "questions": [
      ["Koliko ima kontinenata na zemlji?", ["5", "7", "10"], "7"],
      ["Da li je zemlja okrugla?", ["DA", "NE"], "DA"],
      ["Hoće li HDZ dobiti sljedeće izbore?", ["DA", "NE"], "DA"]
    ],
    "current": 0
  },

  "view": {
    "template": "<h1> <%= meta.name %> </h1> <div class=\"child-container\"></div>",
    "style": "this { padding: 10px; background-color: #E1E1FF; position: absolute; top: 0; left: 0; right: 0; bottom: 0 } this h1 { text-align: center }",
    "data": "this"
  },

  "children": [{
    "id": "mod_question",

    "data": {},

    "view": {
      "template": "<h3> <%= question %> </h3> <% for(var i=0; i<answers.length; i++) { var radioId = _.uniqueId('radio_'); %> <label for=\"<%= radioId %>\" class=\"answer\"> <input id=\"<%= radioId %>\" name=\"answer\" type=\"radio\" value=\"<%= answers[i] %>\"> <span><%= answers[i] %></span> </label> <% } %> <div class=\"buttons\"> <button class=\"btn-answer\"> Odgovori </button> </div>",
      "styleRules": [
        "this { padding: 0 10px; }",
        "this .answer { padding: 5px; cursor: pointer; display: block; border-radius: 3px; }",
        "this .answer:hover { background-color: rgba(0,0,0,0.05); }",
        "this .buttons { margin-top: 20px; }",
        "this .btn-answer { font-size: 18px; line-height: 24px; cursor: pointer; }"
      ],
      "events": {
        "click .btn-answer": "() => { if (this.view.$('input[type=radio]:checked').val() === this.data.correct) { this.trigger('answer:correct'); } else { this.trigger('answer:wrong'); } }"
      }
    }
  }, {
    "id": "mod_response",

    "data": {
      "label": "Netočno",
      "cssClass": "wrong",
      "visible": false
    },

    "view": {
      "template": "<% if (visible) { %> <div class=\"<%= cssClass %>\"> <%= label %> </div> <% } %> ",
      "styleRules": [
        "this { margin-top: 50px; font-size: 20px; }",
        "this .correct { color: green; }",
        "this .wrong { color: red; }"
      ],
      "events": {
        "click": "() => { this.trigger('click'); }"
      }
    }
  }],

  "layout": ".child-container",

  "actions": {
    "this beforeDisplay": "() => { this.meta.setCurrentQuestion(); }",
    "children.mod_question answer:correct": "() => { this.meta.showCorrectResponse(); this.meta.nextQuestionAfterTimeout(); }",
    "children.mod_question answer:wrong": "() => { this.meta.showWrongResponse(); }",
    "children.mod_response click": "() => { this.meta.hideResponse() }"
  }
}
